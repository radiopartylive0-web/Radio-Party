<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Party Valencia</title>

    <!-- Meta etiquetas para redes sociales -->
    <meta property="og:title" content="Radio Party Valencia" />
    <meta property="og:description" content="Escucha la mejor música 24/7 con Radio Party Valencia." />
    <meta property="og:image" content="https://i.postimg.cc/2SpsJK9G/favorita-cover.jpg" />
    <meta property="og:url" content="https://radiopartylive0-web.github.io/Radio-Party" />
    <meta property="og:type" content="website" />

    <!-- Meta etiquetas para Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Radio Party Valencia" />
    <meta name="twitter:description" content="Escucha la mejor música 24/7 con Radio Party Valencia." />
    <meta name="twitter:image" content="https://i.postimg.cc/2SpsJK9G/favorita-cover.jpg" />
    <meta name="twitter:url" content="https://radiopartylive0-web.github.io/Radio-Party" />

    <!-- CSS y otros recursos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
            font-family:'Segoe UI', sans-serif;
        }

        body{
            background:#0b0b0b;
            color:#fff;
        }

        /* ================= HEADER VIDEO ================= */
        .header{
            height: clamp(80px, 12vw, 100px);
            display:flex;
            align-items:center;
            justify-content:center;
            overflow:hidden;
        }

        .header video{
            height:100%;
            width:100%;
            object-fit:cover;
        }

        /* ================= CONTENEDOR GENERAL ================= */
        .player-container{
            width:100%;
            max-width:420px;
            height: calc(100vh - clamp(80px, 12vw, 100px));
            margin:auto;
            position:relative;
            overflow:hidden;
        }

        /* ================= FONDO BLUR ================= */
        .background{
            position:absolute;
            inset:0;
            background-size:cover;
            background-position:center;
            filter:blur(25px) brightness(.35);
            z-index:1;
        }

        /* ================= CONTENIDO ================= */
        .content{
            position:relative;
            z-index:2;
            height:100%;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            padding:20px;
        }

        /* ================= TARJETA ================= */
        .card{
            background:rgba(0,0,0,.6);
            border-radius:25px;
            padding:25px;
            width:100%;
            max-width:320px;
            text-align:center;
            box-shadow:0 20px 40px rgba(0,0,0,.5);
        }

        /* ================= COVER ================= */
        .cover{
            width:220px;
            height:220px;
            margin:auto;
            border-radius:20px;
            overflow:hidden;
        }

        .cover img{
            width:100%;
            height:100%;
            object-fit:cover;
        }

        /* ================= TEXTOS ================= */
        .onair{
            margin-top:15px;
            background:#e53935;
            display:inline-block;
            padding:4px 12px;
            border-radius:20px;
            font-size:.8rem;
            font-weight:bold;
        }

        h1{
            margin-top:12px;
            font-size:1.2rem;
        }

        p{
            font-size:.9rem;
            opacity:.8;
            margin-top:5px;
        }

        /* ================= CONTROLES ================= */
        .controls{
            margin-top:25px;
            width:100%;
            display:flex;
            justify-content:center;
        }

        .play-btn{
            width:75px;
            height:75px;
            border-radius:50%;
            background:#ffffff15;
            border:2px solid rgba(255,255,255,.25);
            display:flex;
            align-items:center;
            justify-content:center;
            cursor:pointer;
            transition:.3s;
        }

        .play-btn:hover{
            transform:scale(1.1);
        }

        .play-btn img{
            width:32px;
            height:32px;
        }

        /* ================= REDES ================= */
        .socials{
            margin-top:20px;
            display:flex;
            gap:25px;
            justify-content:center;
        }

        .socials a{
            color:#fff;
            font-size:1.4rem;
            transition:.3s;
        }

        .socials a:hover{
            color:#ff4fd8;
        }

        /* ================= WAVE ================= */
        #wave{
            position:absolute;
            bottom:0;
            width:100%;
            height:120px;
            z-index:2;
        }
    </style>
</head>

<body>

<div class="header">
    <video autoplay muted loop playsinline preload="auto">
        <source src="https://archive.org/download/oinoinon_202602/oinoinon.mp4" type="video/mp4">
    </video>
</div>

<div class="player-container">
    <div class="background" id="background"></div>

    <div class="content">
        <div class="card">
            <div class="cover">
                <img id="coverImg" src="https://i.postimg.cc/2SpsJK9G/favorita-cover.jpg">
            </div>

            <div class="onair">ON AIR 24/7</div>
            <h1 id="songTitle">Cargando...</h1>
            <p id="songArtist">...</p>
        </div>

        <div class="controls">
            <div class="play-btn" id="playBtn">
                <img id="playIcon" src="URL_PLAY.png">
            </div>
        </div>

         <div class="socials">
            <a href="https://www.facebook.com/1RFMjTjthp/" target="_blank" aria-label="Facebook">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://www.instagram.com/djkevin_inthemix?igsh=YzFhZDgwZnN3Nm5u" target="_blank" aria-label="Instagram">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="https://www.tiktok.com/@djkevin_ok" target="_blank" aria-label="TikTok">
                <i class="fab fa-tiktok"></i>
            </a>
    </div>

    <canvas id="wave"></canvas>
</div>

<audio id="audio" src="https://miestacion.turadioonline.com.ar:8286/stream" crossorigin="anonymous"></audio>

<script>
const audio = document.getElementById('audio');
const playBtn = document.getElementById('playBtn');
const playIcon = document.getElementById('playIcon');
const coverImg = document.getElementById('coverImg');
const background = document.getElementById('background');
const songTitle = document.getElementById('songTitle');
const songArtist = document.getElementById('songArtist');

const PLAY_IMG = 'https://i.postimg.cc/6pDZsbHB/boton-de-play.png';
const PAUSE_IMG = 'https://i.postimg.cc/MKpV1Qcm/pausa.png';

let playing = false;
playIcon.src = PLAY_IMG;

playBtn.onclick = ()=>{
    if(!playing){
        audio.play();
        playIcon.src = PAUSE_IMG;
    }else{
        audio.pause();
        playIcon.src = PLAY_IMG;
    }
    playing = !playing;
};

/* ================= VISUALIZADOR ================= */
const canvas = document.getElementById('wave');
const ctx = canvas.getContext('2d');
let audioCtx, analyser, source, dataArray;

function init(){
    if(audioCtx) return;
    audioCtx = new AudioContext();
    analyser = audioCtx.createAnalyser();
    source = audioCtx.createMediaElementSource(audio);
    source.connect(analyser);
    analyser.connect(audioCtx.destination);
    analyser.fftSize = 256;
    dataArray = new Uint8Array(analyser.frequencyBinCount);
    animate();
}

function animate(){
    requestAnimationFrame(animate);
    analyser.getByteFrequencyData(dataArray);
    canvas.width = innerWidth;
    canvas.height = 120;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle='rgba(255,255,255,.25)';
    let x=0;
    let w=(canvas.width/dataArray.length)*2;
    ctx.beginPath();
    ctx.moveTo(0,canvas.height);
    dataArray.forEach(v=>{
        let y=canvas.height-(v/255)*canvas.height;
        ctx.lineTo(x,y);
        x+=w;
    });
    ctx.lineTo(canvas.width,canvas.height);
    ctx.fill();
}

audio.onplay = init;

/* ================= METADATOS ================= */
async function fetchInfo(){
    try{
        const r = await fetch('https://miestacion.turadioonline.com.ar/cp/get_info.php?p=8286');
        const d = await r.json();

        const art = d.art || coverImg.src;
        const title = d.title || "Radio Party";
        const artist = d.artist || "Tu Radio Online";

        coverImg.src = art;
        background.style.backgroundImage = `url(${art})`;
        songTitle.textContent = title;
        songArtist.textContent = artist;
    }catch{ }
}

fetchInfo();
setInterval(fetchInfo,5000);
</script>

</body>
</html>

